# React + Vite AI 聊天界面项目

老师您好，这是我的基于 React + Vite 开发的 AI 聊天界面项目，支持聊天历史记录、Markdown 渲染、打字机效果等功能。

## 运行步骤

请老师
在有 Node.js 基础上  在React-Vite-AI-main  npm install 安装依赖  npm run dev 启动  

## 设计思路

1、确定基本功能和页面布局：输入框，显示区域，左侧历史区域，剩下的菜单按钮等，用 grid 分割  

2、输入框：text 状态实时更新输入，按下提交按钮时把 text 传给 textDisplay。生成时禁用按钮。设计样式、提示和动效。

3、聊天框：点击按钮-打印问题输入-模拟回答生成-打印回答-等待下一次输入/操作，我认为是相对固定流程，综合后用一个 stage 状态指示。打字机效果由延时模拟。增加重新生成
和复制功能。  为了像常见的聊天界面一样，用 history 数组存储所有对话并遍历打印。history 需要一直显示，最新对话有前后顺序先问生成再答，并且需要实时滚动，所以设置两组<OutPutBox>和<AnswerBox>组件；最新对话结束后会被加入 history，不能显示两遍最新，所以 history 去掉最后一个；但这样在 stage3 开始会缺失一个，所以再放一组，通过传递合适的 prop 保证体验。  重新生成和复制功能由按下按钮触发。  由于打字机需要复用，提出来监听 stage 触发。  滚动由 Anchor 组件是否包裹实现。


4、历史记录：读取 history 并截取问和答分别四个字模拟真实 AI 生成的"话题名称"。点击时设定高亮样式，并触发滚动到相应内容。用 localstorage 储存实现本地持久化，清除按钮全部清除。刷新界面时保有历史对话，直接按下历史话题需等待渲染完成再滚动，否则偏差。


5、markdown 由 react-markdown 等库实现粗体、代码、图片等回答


6、增加了一个欢迎界面，由 stage 状态管理


6、模拟回答、需要的图片存在本地 json 文件中



## 功能

1、输入框输入，支持 shitf+enter 换行，enter 直接发送。  2、回复会先"生成中"三秒，后打字机效果逐字输出 markdown 格式回复。支持复制和重新生成。自动滚动。  3、所有对话会保留在聊天框中，生成标题名在侧边栏中，点击可以自动跳转相应对话。  4、本地持久化，刷新不会失去对话，可直接点击标题跳转或继续发送问题。按下清除一键删除历史对话。  5、欢迎小动画。

## 思考与感悟

1、react 与之前学过的命令式编程有所区别，时间紧凑，刚上手思维上容易犯错  2、开始定义了特别多状态，发现可以用 stage 简化。尽管如此看起来还是很乱，以后完善考虑 reducer  3、css 的布局需要耐心调整，也没能做完多媒体适配等。还有太多需要时间调整。  4、非常感谢老师与字节跳动提供的学习机会！

## 谢谢！
